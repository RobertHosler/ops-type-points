<div class="mt-3">
  <h2>Function Points Table</h2>
  <p>
    Points calculated for each function based on Modality, Grant Order,
    Activation Count, and Savior Status (see dashboard). Points are largely a
    relative representation of how balanced a type is with their given
    functions. Its building off the idea of the activated column in the dashboard
    but acknowledging that saviors and the grant function order still matter.
  </p>
  <table class="table mt-3">
    <thead>
      <th>Function</th>
      <th>Modality</th>
      <th>Grant</th>
      <th>Activation</th>
      <th>Savior</th>
      <th>Animal</th>
      <th>Total</th>
      <th>Percentage</th>
    </thead>
    <tbody>
      <tr *ngFor="let function of functions; index as i">
        <td>{{ function.name }}</td>
        <td>{{ function.modalityPoints }}</td>
        <td>{{ function.grantPoints }}</td>
        <td>{{ function.activationPoints }}</td>
        <td>{{ function.saviorPoints }}</td>
        <td>{{ function.animalPoints }}</td>
        <td>{{ function.totalPoints }}</td>
        <td>{{ function.pointPercentage }}</td>
      </tr>
    </tbody>
  </table>

  <h4>Point Theory</h4>
  <p>
    Modality - Masculine functions tend to appear more obviously in a type since
    they are punchier and what is sticking with a type.
  </p>
  <p>
    Grant Order - Dave and Shannon have acknowledged there is still a
    significance to the more traditional Grant stack ordering of the functions
    even in 'jumpers'.
  </p>
  <p>
    Activation - Functions used within the first 3 animals tend to be more
    visible within a type since they are more willing to engage with those
    functions through those animals. This is part of the reason Glass Lizard
    types (those with a single activated first savior and double activated
    inferior) can be difficult to type.
  </p>
  <p>
    Savior State - Compounding on the Animal Activation, this factor gives
    greater weight to your first savior, slightly less to your second savior,
    and function activated by a savior animal, and applies the lowest weight to
    the function not activated in a savior state. This is the currently given
    the greatest weight for pointing.
  </p>
  <p>
      Animal State - Animals distribute points to the functions used within them. 
      Each function will receive a variable amount of points from each animal depending
      on whether that animal is a savior, activated, or missing.
  </p>

  <div class="mb-3">
    <button
      type="button"
      class="btn btn-primary mr-3"
      (click)="configureOptions = !configureOptions"
    >
      {{ !configureOptions ? "Show" : "Hide" }} Points Configuration
    </button>
    <button
      type="button"
      (click)="assignNew()"
      class="btn btn-success mr-3"
    >
      Assign New Point Values
    </button>
    <button
      type="button"
      (click)="assignDefault()"
      class="btn btn-secondary mr-3"
    >
      Assign Old Point Values
    </button>
    <button
      type="button"
      (click)="assignPoints()"
      class="btn btn-primary mr-3"
      *ngIf="configureOptions"
    >
      Update Points
    </button>
  </div>

  <div *ngIf="configureOptions">
    <div class="mt-3">
      <h3>Weights and Factors</h3>
      <p>
        Customize the weights and factors used to calculate the function points
        above. Points are calculated for each option by multipling the weight
        with the factor. After you update the values, click the reassign points
        button above to update the table.
      </p>
    </div>

    <div class="row mb-3">
      <div class="col-lg-3 col-md-6">
        <table class="mb-3">
          <thead>
            <th colspan="3">Modality</th>
          </thead>
          <thead>
            <th>Label</th>
            <th>Factor</th>
            <th>Points</th>
          </thead>
          <tbody>
            <tr *ngFor="let mo of modalityOptions; index as i">
              <td>{{ mo.label }}</td>
              <td>
                <input
                  id="mo{{ i }}"
                  type="text"
                  class="form-control"
                  [(ngModel)]="mo.factor"
                />
              </td>
              <td>{{ mo.factor * modalityWeight }}</td>
            </tr>
            <tr>
              <td>Weight</td>
              <td colspan="2">
                <input
                  id="modalityWeight"
                  type="text"
                  class="form-control"
                  [(ngModel)]="modalityWeight"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="col-lg-3 col-md-6">
        <table class="mb-3">
          <thead>
            <th colspan="3">Activation</th>
          </thead>
          <thead>
            <th>Label</th>
            <th>Factor</th>
            <th>Points</th>
          </thead>
          <tbody>
            <tr *ngFor="let mo of activationOptions; index as i">
              <td>{{ mo.number }}</td>
              <td>
                <input
                  id="mo{{ i }}"
                  type="text"
                  class="form-control"
                  [(ngModel)]="mo.factor"
                />
              </td>
              <td>{{ mo.factor * activationWeight }}</td>
            </tr>
            <tr>
              <td>Weight</td>
              <td colspan="2">
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="activationWeight"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="col-lg-3 col-md-6">
        <table class="mb-3">
          <thead>
            <th colspan="3">Grant Order</th>
          </thead>
          <thead>
            <th>Label</th>
            <th>Factor</th>
            <th>Points</th>
          </thead>
          <tbody>
            <tr *ngFor="let opt of grantOptions; index as i">
              <td>{{ opt.number }}</td>
              <td>
                <input
                  id="mo{{ i }}"
                  type="text"
                  class="form-control"
                  [(ngModel)]="opt.factor"
                />
              </td>
              <td>{{ opt.factor * grantWeight }}</td>
            </tr>
            <tr>
              <td>Weight</td>
              <td colspan="2">
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="grantWeight"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="col-lg-3 col-md-6">
        <table class="mb-3">
          <thead>
            <th colspan="3">Savior</th>
          </thead>
          <thead>
            <th>Label</th>
            <th>Factor</th>
            <th>Points</th>
          </thead>
          <tbody>
            <tr *ngFor="let mo of saviorOptions; index as i">
              <td>{{ mo.option }}</td>
              <td>
                <input
                  id="mo{{ i }}"
                  type="text"
                  class="form-control"
                  [(ngModel)]="mo.factor"
                />
              </td>
              <td>{{ mo.factor * saviorWeight }}</td>
            </tr>
            <tr>
              <td>Weight</td>
              <td colspan="2">
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="saviorWeight"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="col-lg-3 col-md-6">
        <table class="mb-3">
          <thead>
            <th colspan="3">Animal</th>
          </thead>
          <thead>
            <th>Label</th>
            <th>Factor</th>
            <th>Points</th>
          </thead>
          <tbody>
            <tr *ngFor="let op of animalOptions; index as i">
              <td>{{ op.option }}</td>
              <td>
                <input
                  id="mo{{ i }}"
                  type="text"
                  class="form-control"
                  [(ngModel)]="op.factor"
                />
              </td>
              <td>{{ op.factor * animalWeight }}</td>
            </tr>
            <tr>
              <td>Weight</td>
              <td colspan="2">
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="animalWeight"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
